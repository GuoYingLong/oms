import{m as L,r as f,D as B,j as t,y as H,c5 as I}from"./index-vyLcd-Je.js";import{d as P,S as T}from"./SnackMessageUpLoadFileProgress-mrKZ2kvA.js";import{T as z}from"./TextField-ExYO2cNO.js";import{B as w}from"./Button-P3xriBeC.js";const A=L(r=>H({root:{display:"flex",alignContent:"space-evenly",alignItems:"center",justifyContent:"space-around","& > *":{margin:r.spacing(1)}},input:{display:"none"}}));function R(r){const{filePath:d="",typeId:l,type:c,onBeforeUpload:p,onUploadComplete:u,showUploadProgress:U,customUploadFn:m}=r,g=A(),[s,k]=f.useState(null),[h,x]=f.useState("未选择任何文件"),[D,y]=f.useState([]),{enqueueSnackbar:o}=B(),N=e=>{var i,j,v,F,S,b;if(e.target.files[0].name){if(((i=e.target)==null?void 0:i.files.length)<2){x((v=(j=e.target)==null?void 0:j.files[0])==null?void 0:v.name);const n=[];for(let a=0;a<e.target.files.length;a++)n.push(e.target.files[a].name);y(n)}else{x(`${(F=e.target)==null?void 0:F.files.length}个文件`),console.log((S=e.target)==null?void 0:S.files);const n=[];for(let a=0;a<e.target.files.length;a++)n.push(e.target.files[a].name);y(n)}k((b=e.target)==null?void 0:b.files)}},C=async()=>{if(!s[0]){o("请选择需要上传的文件！！！",{autoHideDuration:3e3,variant:"warning"});return}if(!c){o("请选择类型！！！",{autoHideDuration:3e3,variant:"warning"});return}if(!l){o("请选择子选项！！！",{autoHideDuration:3e3,variant:"warning"});return}if(p&&p(),U){const e={id:l,type:c,remote:d,files:s},i=new Date().getTime();o("文件",{autoHideDuration:1e4,anchorOrigin:{vertical:"bottom",horizontal:"right"},key:i,persist:!0,variant:"warning",content:t.jsx(T,{id:i,total:D,message:h,data:e,cb:u})});return}if(m)m(s);else{const e=await I({id:l,type:c,remote:d,files:s});console.log("uploadFileApi res",e)}u&&u()};return t.jsxs("div",{className:g.root,children:[t.jsx(z,{size:"small",disabled:!0,id:"select-file",variant:"outlined",value:h}),t.jsx("input",{className:g.input,id:"contained-button-file",multiple:!0,type:"file",onChange:e=>N(e)}),t.jsx("label",{htmlFor:"contained-button-file",children:t.jsx(w,{variant:"contained",color:"primary",component:"span",children:"选择文件"})}),t.jsx(w,{variant:"contained",startIcon:t.jsx(P,{}),onClick:()=>C(),children:"上传"})]})}export{R as U};
